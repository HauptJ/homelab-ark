---
# tasks file for ark

# ark will run with user:group 1000:1000 in the docker container itself,
# so I'm using that user:group for the volume as well.
- name: Create directories for docker volumes
  become: true
  file:
    path: "{{ ark_dir }}"
    state: directory
    owner: 1000
    group: 1000
    mode: 0755
  tags:
    - ark

- name: Generate "{{ item }}"
  template:
    src: "{{ item }}.j2"
    dest: "{{ ark_dir }}/{{ item }}"
    mode: 0644
  with_items:
    - arkmanager.cfg
    - GameUserSettings.ini
    - Game.ini
    - crontab
  tags:
    - ark

# - name: Clone Ark-docker from github - https://github.com/TuRz4m/Ark-docker
#   git:
#     repo: https://github.com/TuRz4m/Ark-docker
#     dest: "~/Ark-docker"
#     version: master
#     owner: 1000
#     group: 1000
#     update: no
#   tags:
#     - ark

#   package:
#     name: "{{ item }}"
#     state: present
#   with_items:
#     - vim
#   tags:
#     - vim
#
# - name: create ~/.vim diretory
#   become: false
#   file:
#     path: "~/.vim/"
#     state: directory
#     mode: 0755
#   tags:
#     - vim
#
# - name: Clone vundle from github
#   become: false
#   git:
#     repo: https://github.com/VundleVim/Vundle.vim.git
#     dest: "~/.vim/bundle/Vundle.vim"
#     version: master
#     update: no
#   tags:
#     - vim
#
# - name: Generate ~/.vimrc
#   become: false
#   template:
#     src: vimrc.j2
#     dest: "~/.vimrc"
#     mode: "0644"
#   notify: install plugins
#   tags:
#     - vim
#
# - name: Check existence of spell-check file
#   stat:
#     path: "~/.vim/en.utf-8.add"
#   register: spell_check_file
#   tags:
#     - vim
#
# - name: Touch spell-check file
#   become: false
#   file:
#     path: "~/.vim/en.utf-8.add"
#     state: touch
#     mode: 0644
#   when: spell_check_file.stat.exists != true
#   tags:
#     - vim
#
# - name: vim info
#   debug:
#     msg: "See ':h vundle' for more details."
#   tags:
#     - vim
#
